{"ast":null,"code":"var _jsxFileName = \"/home/rafa/Documentos/Programming/My Projects/Front-End/trivia-game/src/pages/Play.js\";\nimport React from 'react';\nimport Header from '../components/Header';\nimport '../styles/play.css';\n\nclass Play extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      answerIndex: 0,\n      answerSelected: false\n    };\n    this.nextQuestion = this.nextQuestion.bind(this);\n    this.styleAnswer = this.styleAnswer.bind(this);\n    this.answerSelected = this.answerSelected.bind(this);\n  }\n\n  setRanking() {\n    const {\n      player\n    } = JSON.parse(localStorage.getItem('state'));\n    addPlayerInRanking(player.gravatarEmail, player);\n  }\n\n  setReduxAndLocalStorage(answer) {\n    const {\n      asks,\n      time\n    } = this.props;\n    const ask = asks.find(askItem => answer === askItem.correct_answer);\n    const {\n      difficulty\n    } = ask;\n    const valuePattern = 10;\n    const valueHard = 3;\n    let valueDifficulty = 0;\n    if (difficulty === 'hard') valueDifficulty = valueHard;else if (difficulty === 'medium') valueDifficulty = 2;else valueDifficulty = 1;\n    const score = valuePattern + time * valueDifficulty;\n    const dataStorage = { ...JSON.parse(localStorage.getItem('state'))\n    };\n    dataStorage.player.score += score;\n    this.updateScore(dataStorage);\n  }\n\n  updateScore(dataStorage) {\n    const {\n      savScore\n    } = this.props;\n    dataStorage.player.assertions += 1;\n    savScore(dataStorage.player.score);\n    localStorage.setItem('state', JSON.stringify({ ...dataStorage\n    }));\n  }\n\n  styleAnswer(answer, correctAnswer) {\n    const {\n      answerSelected\n    } = this.state;\n\n    if (answerSelected) {\n      if (answer === correctAnswer) {\n        return {\n          border: '3px solid rgb(6, 240, 15)'\n        };\n      }\n\n      if (answer !== correctAnswer) {\n        return {\n          border: '3px solid rgb(255, 0, 0)'\n        };\n      }\n    }\n\n    return {\n      border: null\n    };\n  }\n\n  answerSelected(evt) {\n    const {\n      interval\n    } = this.props;\n    const {\n      value\n    } = evt.target;\n    this.setState({\n      answerSelected: true\n    });\n    clearInterval(interval);\n    if (value) this.setReduxAndLocalStorage(value);\n  }\n\n  nextQuestion() {\n    const {\n      setTimeProp,\n      saveIntervalProp,\n      restartTimeProp\n    } = this.props;\n    const {\n      answerIndex\n    } = this.state;\n    this.setState({\n      answerIndex: answerIndex + 1,\n      answerSelected: false\n    });\n    restartTimeProp();\n    const intervalTime = 1000;\n    const interval = setInterval(() => setTimeProp(1), intervalTime);\n    saveIntervalProp(interval);\n  }\n\n  elementButtonNext() {\n    const {\n      asks\n    } = this.props;\n    const {\n      answerIndex\n    } = this.state;\n    const MAX = asks.length - 1;\n\n    if (answerIndex === MAX) {\n      return /*#__PURE__*/React.createElement(Link, {\n        className: \"link-feedback\",\n        to: \"/feedback\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn-finish\",\n        onClick: this.setRanking,\n        type: \"button\",\n        \"data-testid\": \"btn-next\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }\n      }, \"Finish\"));\n    }\n\n    return /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn-next\",\n      type: \"button\",\n      \"data-testid\": \"btn-next\",\n      onClick: this.nextQuestion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }\n    }, \"Next\");\n  }\n\n  elementAnswer(answer, testid, index, correctAnswer) {\n    const {\n      answerSelected\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn-answer\",\n      value: correctAnswer === answer ? answer : '',\n      disabled: answerSelected,\n      key: index,\n      type: \"button\",\n      \"data-testid\": testid,\n      style: this.styleAnswer(answer, correctAnswer),\n      onClick: this.answerSelected,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }, answer);\n  }\n\n  renderAnswers(answers) {\n    const {\n      answerIndex\n    } = this.state;\n    const {\n      asks\n    } = this.props;\n    return answers.map((answerElement, indexElement) => {\n      const {\n        answer,\n        index\n      } = answerElement;\n\n      if (answer === asks[answerIndex].correct_answer) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"btn-answer\",\n          key: indexElement,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 11\n          }\n        }, this.elementAnswer(answer, 'correct-answer', indexElement, asks[answerIndex].correct_answer));\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn-answer\",\n        key: indexElement,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }\n      }, this.elementAnswer(answer, `wrong-answer-${index}`, indexElement, asks[answerIndex].correct_answer));\n    });\n  }\n\n  render() {\n    const {\n      answerIndex,\n      answerSelected\n    } = this.state;\n    const {\n      asks,\n      statusTimer,\n      updateStatusProp\n    } = this.props;\n    const MAX_QUESTIONS = asks.length - 1;\n\n    if (statusTimer) {\n      this.setState({\n        answerSelected: true\n      });\n      updateStatusProp();\n    }\n\n    if (asks.length > 0) {\n      const {\n        category,\n        question\n      } = asks[answerIndex];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-main-play\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-ask\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"text-category\",\n        \"data-testid\": \"question-category\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }\n      }, category), /*#__PURE__*/React.createElement(\"p\", {\n        \"data-testid\": \"question-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }\n      }, question), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-answers\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }\n      }, this.renderAnswers(asks[answerIndex].results)), answerSelected && answerIndex <= MAX_QUESTIONS && this.elementButtonNext(), /*#__PURE__*/React.createElement(Timer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-main-play\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"msg-loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }\n    }, \"Loading... Prepare!\"));\n  }\n\n}\n\nPlay.propTypes = {\n  asks: PropTypes.arrayOf(PropTypes.object),\n  savScore: PropTypes.func,\n  setTimeProp: PropTypes.func,\n  saveIntervalProp: PropTypes.func,\n  restartTimeProp: PropTypes.func,\n  interval: PropTypes.number,\n  time: PropTypes.number\n}.isRequired;\n\nconst mapStateToProps = state => ({\n  asks: state.askAndAnswersReducer,\n  interval: state.timer.interval,\n  time: state.timer.time,\n  statusTimer: state.timer.statusFinishTimer\n});\n\nconst mapDispatchToProps = dispatch => ({\n  savScore: score => dispatch(saveScore(score)),\n  setTimeProp: value => dispatch(setTime(value)),\n  saveIntervalProp: value => dispatch(saveInterval(value)),\n  restartTimeProp: () => dispatch(restartTime()),\n  updateStatusProp: () => dispatch(updateStatus())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Play);","map":{"version":3,"sources":["/home/rafa/Documentos/Programming/My Projects/Front-End/trivia-game/src/pages/Play.js"],"names":["React","Header","Play","Component","constructor","props","state","answerIndex","answerSelected","nextQuestion","bind","styleAnswer","setRanking","player","JSON","parse","localStorage","getItem","addPlayerInRanking","gravatarEmail","setReduxAndLocalStorage","answer","asks","time","ask","find","askItem","correct_answer","difficulty","valuePattern","valueHard","valueDifficulty","score","dataStorage","updateScore","savScore","assertions","setItem","stringify","correctAnswer","border","evt","interval","value","target","setState","clearInterval","setTimeProp","saveIntervalProp","restartTimeProp","intervalTime","setInterval","elementButtonNext","MAX","length","elementAnswer","testid","index","renderAnswers","answers","map","answerElement","indexElement","render","statusTimer","updateStatusProp","MAX_QUESTIONS","category","question","results","propTypes","PropTypes","arrayOf","object","func","number","isRequired","mapStateToProps","askAndAnswersReducer","timer","statusFinishTimer","mapDispatchToProps","dispatch","saveScore","setTime","saveInterval","restartTime","updateStatus","connect"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Header from '../components/Header';\nimport '../styles/play.css';\n\nclass Play extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      answerIndex: 0,\n      answerSelected: false,\n    };\n    this.nextQuestion = this.nextQuestion.bind(this);\n    this.styleAnswer = this.styleAnswer.bind(this);\n    this.answerSelected = this.answerSelected.bind(this);\n  }\n\n  setRanking() {\n    const { player } = JSON.parse(localStorage.getItem('state'));\n    addPlayerInRanking(player.gravatarEmail, player);\n  }\n\n  setReduxAndLocalStorage(answer) {\n    const { asks, time } = this.props;\n    const ask = asks.find((askItem) => answer === askItem.correct_answer);\n    const { difficulty } = ask;\n    const valuePattern = 10;\n    const valueHard = 3;\n    let valueDifficulty = 0;\n\n    if (difficulty === 'hard') valueDifficulty = valueHard;\n    else if (difficulty === 'medium') valueDifficulty = 2;\n    else valueDifficulty = 1;\n    const score = valuePattern + time * valueDifficulty;\n    const dataStorage = { ...JSON.parse(localStorage.getItem('state')) };\n    dataStorage.player.score += score;\n    this.updateScore(dataStorage);\n  }\n\n  updateScore(dataStorage) {\n    const { savScore } = this.props;\n    dataStorage.player.assertions += 1;\n    savScore(dataStorage.player.score);\n    localStorage.setItem('state', JSON.stringify({ ...dataStorage }));\n  }\n\n  styleAnswer(answer, correctAnswer) {\n    const { answerSelected } = this.state;\n    if (answerSelected) {\n      if (answer === correctAnswer) {\n        return { border: '3px solid rgb(6, 240, 15)' };\n      }\n      if (answer !== correctAnswer) {\n        return { border: '3px solid rgb(255, 0, 0)' };\n      }\n    }\n    return { border: null };\n  }\n\n  answerSelected(evt) {\n    const { interval } = this.props;\n    const { value } = evt.target;\n    this.setState({ answerSelected: true });\n    clearInterval(interval);\n    if (value) this.setReduxAndLocalStorage(value);\n  }\n\n  nextQuestion() {\n    const { setTimeProp, saveIntervalProp, restartTimeProp } = this.props;\n    const { answerIndex } = this.state;\n    this.setState({ answerIndex: answerIndex + 1, answerSelected: false });\n    restartTimeProp();\n    const intervalTime = 1000;\n    const interval = setInterval(() => setTimeProp(1), intervalTime);\n    saveIntervalProp(interval);\n  }\n\n  elementButtonNext() {\n    const { asks } = this.props;\n    const { answerIndex } = this.state;\n    const MAX = asks.length - 1;\n    if (answerIndex === MAX) {\n      return (\n        <Link className=\"link-feedback\" to=\"/feedback\">\n          <button\n            className=\"btn-finish\"\n            onClick={this.setRanking}\n            type=\"button\"\n            data-testid=\"btn-next\"\n          >\n            Finish\n          </button>\n        </Link>\n      );\n    }\n    return (\n      <button\n        className=\"btn-next\"\n        type=\"button\"\n        data-testid=\"btn-next\"\n        onClick={this.nextQuestion}\n      >\n        Next\n      </button>\n    );\n  }\n\n  elementAnswer(answer, testid, index, correctAnswer) {\n    const { answerSelected } = this.state;\n    return (\n      <button\n        className=\"btn-answer\"\n        value={correctAnswer === answer ? answer : ''}\n        disabled={answerSelected}\n        key={index}\n        type=\"button\"\n        data-testid={testid}\n        style={this.styleAnswer(answer, correctAnswer)}\n        onClick={this.answerSelected}\n      >\n        {answer}\n      </button>\n    );\n  }\n\n  renderAnswers(answers) {\n    const { answerIndex } = this.state;\n    const { asks } = this.props;\n    return answers.map((answerElement, indexElement) => {\n      const { answer, index } = answerElement;\n      if (answer === asks[answerIndex].correct_answer) {\n        return (\n          <div className=\"btn-answer\" key={indexElement}>\n            {this.elementAnswer(\n              answer,\n              'correct-answer',\n              indexElement,\n              asks[answerIndex].correct_answer\n            )}\n          </div>\n        );\n      }\n      return (\n        <div className=\"btn-answer\" key={indexElement}>\n          {this.elementAnswer(\n            answer,\n            `wrong-answer-${index}`,\n            indexElement,\n            asks[answerIndex].correct_answer\n          )}\n        </div>\n      );\n    });\n  }\n  render() {\n    const { answerIndex, answerSelected } = this.state;\n    const { asks, statusTimer, updateStatusProp } = this.props;\n    const MAX_QUESTIONS = asks.length - 1;\n\n    if (statusTimer) {\n      this.setState({ answerSelected: true });\n      updateStatusProp();\n    }\n\n    if (asks.length > 0) {\n      const { category, question } = asks[answerIndex];\n      return (\n        <div className=\"container-main-play\">\n          <Header />\n          <div className=\"container-ask\">\n            <h3 className=\"text-category\" data-testid=\"question-category\">\n              {category}\n            </h3>\n            <p data-testid=\"question-text\">{question}</p>\n            <div className=\"container-answers\">\n              {this.renderAnswers(asks[answerIndex].results)}\n            </div>\n            {answerSelected &&\n              answerIndex <= MAX_QUESTIONS &&\n              this.elementButtonNext()}\n            <Timer />\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div className=\"container-main-play\">\n        <Header />\n        <p className=\"msg-loading\">Loading... Prepare!</p>\n      </div>\n    );\n  }\n}\n\nPlay.propTypes = {\n  asks: PropTypes.arrayOf(PropTypes.object),\n  savScore: PropTypes.func,\n  setTimeProp: PropTypes.func,\n  saveIntervalProp: PropTypes.func,\n  restartTimeProp: PropTypes.func,\n  interval: PropTypes.number,\n  time: PropTypes.number,\n}.isRequired;\n\nconst mapStateToProps = (state) => ({\n  asks: state.askAndAnswersReducer,\n  interval: state.timer.interval,\n  time: state.timer.time,\n  statusTimer: state.timer.statusFinishTimer,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  savScore: (score) => dispatch(saveScore(score)),\n  setTimeProp: (value) => dispatch(setTime(value)),\n  saveIntervalProp: (value) => dispatch(saveInterval(value)),\n  restartTimeProp: () => dispatch(restartTime()),\n  updateStatusProp: () => dispatch(updateStatus()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Play);\n"]},"metadata":{},"sourceType":"module"}